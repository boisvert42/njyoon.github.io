<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wordlist Manager</title>

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap4.min.css" rel="stylesheet"/>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
      
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L1FXWP7B18"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-L1FXWP7B18');
    </script>

    <script src="js/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap4.min.js"></script>

    <style>
    html {margin-left: calc(100vw - 100%);}
    head{height:100%}
    body{
        background-color:#fcfcfc;
    }
    h1 {
        color:#C28ECA;
        font-size:2rem;
        font-weight:bold;
    }

    h4 {
        font-size:1.1rem;
        color:#686868;
    }

    .material-icons { 
        font-size: 24px; 
        vertical-align: bottom;
    }

    .collapsible-link {
    width: 100%;
    position: relative;
    text-align: left;
    }

    .collapsible-link::before {
    content: '\e5cf';
    position: absolute;
    top: 50%;
    right: 0.8rem;
    transform: translateY(-50%);
    display: block;
    font-family: 'Material Icons';
    font-size: 1.1rem;
    }

    .collapsible-link[aria-expanded='true']::before {
    content: '\e5ce';
    }

    .plus-link {
    width: 100%;
    position: relative;
    }

    .plus-link::before {
    content: '\e145';
    position: absolute;
    font-family: 'Material Icons';
    font-size: 1rem;
    left: -0.3rem;
    transform: translateY(-5%);
    }

    .plus-link[aria-expanded='true']::before {
    content: '\e15b';
    }

    ::placeholder {
        color:lightgrey;
    }

    .btn.focus,.btn:active.focus,.btn.active {
        box-shadow: none;
        outline: none;
    }

    .btn-outline-primary:focus, .btn-outline-primary, .btn-outline-primary:visited {
        color: #C28ECA;
        border-color: #C28ECA;
        background-color: white;
        outline: none;
        box-shadow: none;
    }

    .btn-outline-primary:hover {
        box-shadow: none;
        color: white;
        background-color: #C28ECA;
        border-color: #C28ECA;
        outline: none;
    }

    .btn-outline-primary:active.focus, .btn-outline-primary:active,.btn-outline-primary:not(:disabled):not(.disabled):active {
        box-shadow: none;
        background-color: #C28ECA;
        border-color: #C28ECA;
        color: white;
        outline: none;
    }

    #wordTable_ellipsis{
        z-index: -1;
    }

    .page-link {
        color: #C28ECA;
        border-color: #C28ECA;
        background-color: white;
        outline: none;
        box-shadow: none;
    }

    .page-item.active .page-link {
        box-shadow: none;
        color: white;
        background-color: #C28ECA;
        border-color: #C28ECA;
        outline: none;
    }

    .page-link:hover {
        color: white;
        background-color: #C28ECA;
        border-color: #C28ECA;
    }

    .page-link:focus,.page-link:active.focus,.page-link.active {
        box-shadow: none;
        color: white;
        background-color: #C28ECA;
        border-color: #C28ECA;
        outline: none;
    }

    .nyt {
        color:#f55d4b;
        border-color:#f55d4b;
        margin-right: 5px;
    }

    .nyt:hover {
        background-color:#f55d4b;
        border-color:#f55d4b;
    }

    .pdf {
        color:#06AED5;
        border-color:#06AED5;
    }

    .pdf:hover {
        background-color:#06AED5;
        border-color:#06AED5;
        color:white;
    }
    
    input[type=file] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 250px;
    }

    table.dataTable td {
        font-size: 1em;
        font-family: 'Roboto Mono', monospace;
        padding: 5px;
    }

    .tooltip-inner {
        text-align: left;
        padding: 20px;
        max-width: 300px;
    }
    

    </style>


  </head>

  <body>
    <div class="container pt-3">
        <div class="row">
            <div class="col-12 col-lg-6"><h1>Wordlist Manager ðŸš§</h1></div>
            <div class="d-none d-lg-block col-lg-6">
                <a type="button" href="pdf.html" class="btn btn-info-danger rounded-pill shadow-none pdf float-right"><b>Crossword PDF Editor</b></a>
                <a type="button" href="nyt.html" class="btn btn-outline-danger rounded-pill shadow-none nyt float-right"><b>NYT Submission Editor</b></a>
            </div>
        </div>
        <h4 class="pt-1 pb-1">This tool allows you to more easily edit and add words to wordlists.  To get started, choose your wordlist and then filter using the pattern input box.  For finding words within your wordlist, you'll want to use Adam Aaronson's <a href="https://aaronson.org/wordlisted/">Wordlisted</a> tool instead.</h4>
      <hr>
      <div class="row pt-1 pb-3">

          <div class="col-12 col-lg-4 pb-3">

              <div class="accordion shadow" id="accordionMain">
                    <form>
                        <div class="card">
                            <div class="card-header bg-white shadow-sm border-0" id="headingOne">
                                
                                    <a data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" class="btn btn-link text-dark font-weight-bold text-uppercase collapsible-link">
                                         Load Wordlist
                                    </a> 
                             
                            </div>
                            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionMain">
                                <div class="card-body mx-2 px-4 pt-3 pb-2">
                                    <div class="form-group">   
                                        <label for="files">Select your wordlist:</label>
                                        <input type="file" accept=".txt,.dict" class="form-control-file" id="myList" name="myList" onchange='openList(event)'>
                                    </div>  
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div id="headingTwo" class="card-header bg-white shadow-sm border-0">
               
                                    <a data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" class="btn btn-link collapsed text-dark font-weight-bold text-uppercase collapsible-link">Edit Wordlist</a>
                     
                            </div>
                            <div id="collapseTwo" aria-labelledby="headingTwo" data-parent="#accordionMain" class="collapse">
                                <div class="card-body mx-2 px-4 py-3">
                                    <div class="form-group">
                                        <label for="b1">Score Button One</label><br>
                                        <input type="number" class="form-control-sm col-4" id="b1" value="0">
                                    </div>
                                    <div class="form-group">
                                        <label for="b2">Score Button Two</label><br>
                                        <input type="number" class="form-control-sm col-4" id="b2" value="25">
                                    </div>
                                    <div class="form-group">
                                        <label for="b3">Score Button Three</label><br>
                                        <input type="number" class="form-control-sm col-4" id="b3" value="50">
                                    </div>
                                    <div class="form-group">
                                        <label for="b4">Score Button Four</label><br>
                                        <input type="number" class="form-control-sm col-4" id="b4" value="60">
                                    </div>
                                    <div class="form-group">
                                        <label for="pmi">+/- Interval</label><br>
                                        <input type="number" class="form-control-sm col-4" id="pmi" value="5">
                                    </div>

                                    <div class="custom-control custom-switch pt-2">
                                        <input type="checkbox" class="custom-control-input" id="remember">
                                        <label class="custom-control-label" for="remember">Remember Options</label>
                                    </div>
                                    
                                    <div class="ml-1 pl-2 pt-1" id="remember-buttons">

                                        <button type="button" class="btn btn-outline-primary btn-sm mt-1 ml-4" id="save">Save Options</button>

                                        <button type="button" class="btn btn-outline-primary btn-sm mt-1 ml-1" id="clear">Clear Cache</button>

                                    </div>

                                    
                                </div>  
                            </div>
                        </div>

                        <div class="card">
                            <div id="headingThree" class="card-header bg-white shadow-sm border-0">
               
                                    <a data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree" class="btn btn-link collapsed text-dark font-weight-bold text-uppercase collapsible-link">Add Words</a>
                     
                            </div>
                            <div id="collapseThree" aria-labelledby="headingThree" data-parent="#accordionMain" class="collapse">
                                
                                <div class="card-body mx-2 px-4 pt-2 pb-2">
                                    <div class="form-group">   
                                        <label for="files">Add words from a puzzle or wordlist:</label>
                                        <input type="file" accept=".puz,.xml,.jpz,.xpz,.ipuz,.cfp,.txt,.dict" class="form-control-file" id="addWords" name="addWords" onchange="handleFileSelect(event)">
                                    </div>  
                                    <div class="form-group">
                                        <label for="view">View:</label>
                                        <br>
                                        <select class="form-control col-12" id="view">
                                            <option value="new" selected>List of Words to Add</option>
                                            <option value="diffwords">Words Not in Wordlist</option>
                                            <option value="diffscores">Words Scored Differently</option>
                                            <option value="diffall">Words Either Not in Wordlist or Scored Differently</option>
                                            <option value="all">All Words</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                        </div>


                        <div class="card">
                            <div class="btn-group p-2 justify-content-center" role="group" aria-label="save button">
                                <button class="btn btn-outline-primary col-6" id="saveButton" type="button">Save Wordlist</button>
                            </div>
                        </div>
                        

                        </div>

                    </form>
                
            </div>

        <div class = "col-12 col-lg-8 mb-0" id="main">
            <div id="tab" style="display:none">
                <input type="text" class="column_filter m-3 form-control-lg col-6" id="col0_filter" placeholder="Filter by Pattern">
                <button type="button" class="btn-info-primary rounded-pill" id="infoButton" data-toggle="tooltip" data-placement="right" data-html="true" data-offset="150" title=
                "Type a pattern with letters and wildcards to filter your wordlist.<br><br>
                <ul>
                    <li>The question mark (?) matches a single letter.</li><br>
                    <li>The asterisk (*) matches any number of letters.</li><br>
                    <li>The number symbol (#) matches a single consonant.</li><br>
                    <li>The at symbol (@) matches a single vowel.</li>
                </ul>
                    <b>Example:</b> <i>A??</i> will return all three-letter words beginning with A.">?</button>
                <table cellpadding="3" id="wordTable" class="display table-striped justify-content-center " style="width:100%">
                </table>
            </div>
            
            <div id="loading" class="d-flex justify-content-center mt-5 mb-0 spinner" style="display: none">
                <div class="spinner-border spinner" role="status" style="display: none">
                  <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
    </div>
        
        <script>

        let splitter = [];
        const myWordlist = new Map();
        const yourWordlist = new Map();
        const changedWords = new Map();

        const tableSet = [];
        const newWordSet = [];
        const diffWordSet = [];
        const diffScoreSet = [];
        const diffSet = [];
        const allSet = []; // ha

        var diff = new Boolean(false);

        // update table

        const loadTable = () => {
            $("#tab").hide();
            $(".spinner").show();

            var table = $('#wordTable').DataTable({                        
                destroy: true,
                data: tableSet,
                columns: [
                    { title: 'Word' },
                    { title: 'Score' },
                    { title: 'Change Score'}
                ],
                deferRender: true,
                lengthMenu: [ 10, 15, 20, 50, 100 ],
                pageLength: 10,
                columnDefs: [
                    { "width": "50%", "targets": 0 },
                    { "width": "10%", "targets": 1,
                        "createdCell": function (td, cellData, rowData, row, col) {
                        $(td).css({"background-color":num2color(cellData),"box-shadow":"none"});
                        },"className": "text-center"
                    },
                    { "width": "40%", "targets": 2, "defaultContent":"<button class='btn btn-outline-primary col-2 p-0'>"+ $("#b1").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b2").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b3").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b4").val() +"</button>"+"<button class='btn btn-outline-primary col-2 p-0'>-</button><button class='btn btn-outline-primary col-2 p-0'>+</button>", orderable: false }
                ],
                autoWidth: false,
                dom: 'lrtip',
            });

            $(".spinner").hide();
            $("#tab").show();
            
        }

        const loadDiffTable = () => {

            var view = $("#view").val();
            var viewSet = [];

            diff = true;

            if (view == "new") {
                viewSet = newWordSet;
            } else if (view == "diffwords") {
                viewSet = diffWordSet;
            } else if (view == "diffscores") {
                viewSet = diffScoreSet;
            } else if (view == "diffall") {
                viewSet = diffSet;
            } else if (view == "all") {
                viewSet = allSet;
                console.log(viewSet);
            }

            var table = $('#wordTable').DataTable({                        
                destroy: true,
                data: viewSet,
                columns: [
                    { title: 'Word' },
                    { title: 'Added Score' },
                    { title: 'Score' },
                    { title: 'Change Score'}
                ],
                deferRender: true,
                lengthMenu: [ 10, 15, 20, 50, 100 ],
                pageLength: 10,
                columnDefs: [
                    { "width": "40%", "targets": 0 },
                    { "width": "10%", "targets": 1,
                        "createdCell": function (td, cellData, rowData, row, col) {
                        $(td).css({"background-color":num2color(cellData),"box-shadow":"none"});
                        },"className": "text-center"
                    },                    
                    { "width": "10%", "targets": 2,
                        "createdCell": function (td, cellData, rowData, row, col) {
                        $(td).css({"background-color":num2color(cellData),"box-shadow":"none"});
                        },"className": "text-center"
                    },
                    { "width": "40%", "targets": 3, "defaultContent":"<button class='btn btn-outline-primary col-2 p-0'>"+ $("#b1").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b2").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b3").val() +"</button><button class='btn btn-outline-primary col-2 p-0'>"+ $("#b4").val() +"</button>"+"<button class='btn btn-outline-primary col-2 p-0'>-</button><button class='btn btn-outline-primary col-2 p-0'>+</button>", orderable: false }
                ],
                autoWidth: false,
                dom: 'lrtip',
            });

            $(".spinner").hide();
            $("#tab").show();
            
        }

        

        const openList = (e) => {

            const filename = e.target.files[0].name.split(/[\s.]+/)[0] + " " + new Date().toLocaleDateString();
            const ext = e.target.files[0].name.split('.').pop();

            e.target.files[0].text().then((t) => {       
                
                $("#tab").hide();
                $(".spinner").show();

                splitter = t.split(/\r?\n/);

                myWordlist.clear();
                tableSet.length = 0;
                      
                $.each(splitter,function(i, w) {
                    myWordlist.set(w.substring(0,w.indexOf(';')).replace(/\W/g, '').toUpperCase(),w.substring(w.indexOf(';')).replace(/\W/g, '').toUpperCase());
                });

                if (myWordlist.has("")) {
                    myWordlist.delete("");
                }

                myWordlist.forEach((score,word) => {
                    if (word) {
                        tableSet.push([word,score]);
                    }
                });

                $(document).ready(function () {

                    // remember settings

                    if (window.localStorage.getItem('remember') == 'true') {
                        loadOptions();
                        $('#remember').prop("checked",true);
                        $('#remember-buttons').show();       
                    } else {
                        $('#remember-buttons').hide();
                    }

                    $(function () {
                        $('[data-toggle="tooltip"]').tooltip();
                    })

                    loadTable();

                    $('#wordTable').off('click').on('click', 'td > :button', function () { 
                        const changedWord = this.parentNode.parentNode.firstChild.textContent;
                        const currentScore = this.parentNode.previousSibling;
                        var newScore = 0;

                        if (this.textContent == "+") {
                            if (currentScore.textContent.length > 0) {
                                newScore = parseInt(currentScore.textContent) + parseInt($("#pmi").val());
                            } else {
                                newScore = 50 + parseInt($("#pmi").val());
                            }
                        } else if (this.textContent == "-") {
                            if (currentScore.textContent.length > 0) {
                                newScore = parseInt(currentScore.textContent) - parseInt($("#pmi").val());
                            } else {
                                newScore = 50 - parseInt($("#pmi").val());
                            }
                        } else {
                            newScore = parseInt(this.textContent);
                        }

                        currentScore.textContent = newScore;

                        $(currentScore).css({"background-color":num2color(newScore),"box-shadow":"none"});

                        changedWords.set(changedWord,newScore);
                        myWordlist.set(changedWord,newScore);

                        $("#wordTable").DataTable().cell(currentScore).data(newScore);
                        $("#wordTable").DataTable().cell(currentScore).invalidate();


                    });

                    $('input.column_filter').on('keyup click', function () {

                        let inputTerm = "";

                        if ($('#col0_filter').val()) {
                            inputTerm = $('#col0_filter').val().replaceAll("?",".");
                            inputTerm = inputTerm.replaceAll("*",".*");
                            inputTerm = inputTerm.replaceAll("@","[aeiou]");
                            inputTerm = inputTerm.replaceAll("#","[bcdfghjklmnpqrstvwxyz]");
                            inputTerm = "^" + inputTerm + "$";
                            
                        }

                        $("#wordTable").DataTable()
                            .column(0).search(
                                inputTerm,true,false,true
                            )
                            .draw();
                    });

                    $('input.form-control-sm').on("change", function () {
                        if (diff) {
                            loadTable();
                        } else {
                            loadDiffTable();
                        }
                    });

                    $('#view').on("change", function () {
                        $("#tab").hide();
                        $(".spinner").show();
                        loadDiffTable();
                    });



                    $('#remember').change( function() {

                        if ($('#remember').is(':checked')) {

                            window.localStorage.setItem('remember','true');
                            $('#remember-buttons').show();

                        } else {

                            window.localStorage.setItem('remember','false');
                            $('#remember-buttons').hide();

                        }
                    });

                    $('#clear').click(function() {
                        window.localStorage.clear();
                        $('#remember-buttons').hide();
                        $('#remember').prop("checked",false);
                    });

                    $('#save').click(function() {
                        saveOptions();
                    });



                    // save wordlist

                    const downloadToFile = (content, filename, contentType) => {
                        const a = document.createElement('a');
                        const file = new Blob([content], {type: contentType});
                        
                        a.href= URL.createObjectURL(file);
                        a.download = filename + '.' + ext;
                        a.click();
                        
                        URL.revokeObjectURL(a.href);
                    };

                    document.querySelector('#saveButton').addEventListener('click', () => {
                        downloadToFile(Array.from(myWordlist).join("\n").replace(/,/g,';'), filename, 'text/plain');
                    });


                });

            });

        };

        function num2color(num) {
            var r, g, b = 0;

            if (num.toString().length > 0) {
                if (num <= 30) {
                    r = 250;
                    g = 154 + Math.round(3 * num);
                    b = 162 + Math.round(1.5 * num);
                }
                else if (num <= 50){
                    r = 250 - Math.round(1.2 * (num-30));
                    g = 244 + Math.round(.3 * (num-30));
                    b = 207 + Math.round(.4 * (num-30));
                } else {
                    r = 226 - Math.round(.8*(num-50));
                    g = 250 - Math.round(1.5*(num-50));
                    b = 215 + Math.round(.8*(num-50));
                }
                var h = r * 0x10000 + g * 0x100 + b * 0x1;
                return '#' + ('000000' + h.toString(16)).slice(-6);
            } else {
                return '#566573';
            }
        }

        function saveOptions() {

            // write to localStorage

            window.localStorage.setItem('b1',$('#b1').val());
            window.localStorage.setItem('b2',$('#b2').val());
            window.localStorage.setItem('b3',$('#b3').val());
            window.localStorage.setItem('b4',$('#b4').val());
            window.localStorage.setItem('pmi',$('#pmi').val());

        }

        function loadOptions() {
                
            // -- retrieve from storage --

            if (window.localStorage.getItem('b1')) {
                $('#b1').val(window.localStorage.getItem('b1'));
            }

            if (window.localStorage.getItem('b2')) {
                $('#b2').val(window.localStorage.getItem('b2'));
            }

            if (window.localStorage.getItem('b3')) {
                $('#b3').val(window.localStorage.getItem('b3'));
            }

            if (window.localStorage.getItem('b4')) {
                $('#b4').val(window.localStorage.getItem('b4'));
            }

            if (window.localStorage.getItem('b5')) {
                $('#pmi').val(window.localStorage.getItem('pmi'));
            }

        }
          
        function handleFileSelect(evt) {


            yourWordlist.clear();
            newWordSet.length = 0;
            diffScoreSet.length = 0;
            diffWordSet.length = 0;
            allSet.length = 0;


            var files = document.getElementById('addWords').files; // FileList object
            
            if (!files[0]) {
                alert('Please choose a puzzle file.');
                return;    
            }

            // files is a FileList of File objects.
            for (var i = 0, f; f = files[i]; i++) {

                if (f) {
                    var r = new FileReader();
                    var filename = f.name;
                    var ext = filename.split('.').pop();
                    filename = filename.split(/[/s.]+/)[0];
                    

                    $("#tab").hide();
                    $(".spinner").show();



                    if (ext == "txt" || ext == "dict") {

                        f.text().then((t) => {           

                            splitter = t.split(/\r?\n/);
                                
                            $.each(splitter,function(i, w) {
                                yourWordlist.set(w.substring(0,w.indexOf(';')).replace(/\W/g, '').toUpperCase(),w.substring(w.indexOf(';')).replace(/\W/g, '').toUpperCase());
                            });

                            if (yourWordlist.has("")) {
                                yourWordlist.delete("");
                            }

                            myWordlist.forEach((score,word) => {
                                if (yourWordlist.has(word)) {
                                    allSet.push([word,yourWordlist.get(word),score]);
                                } else {
                                    allSet.push([word,"",score]);
                                }
                            });


                            yourWordlist.forEach((score,word) => {

                                if (myWordlist.has(word)) {                         // if the word is in my wordlist

                                    newWordSet.push([word,score,myWordlist.get(word)]);     // add word to newWordSet array
                                    

                                    if (myWordlist.get(word) != score) {                // if the word has a different score

                                        diffScoreSet.push([word,score,myWordlist.get(word)]);   // add word to diffScoreSet array
                                        diffSet.push([word,score,myWordlist.get(word)]);

                                    } else {

                                    }

                                } else {
                                    newWordSet.push([word,score,""]);       // add word to newWordSet array
                                    diffWordSet.push([word,score,""]);      // add word to diffWordSet array
                                    diffSet.push([word,score,""]);
                                    allSet.push([word,score,""]);
                                }

                                
                            });

                            loadDiffTable();
                        });

                    } else {

                        r.onload = (function(theFile) {
                            return function(e) { 
                                var contents = e.target.result;                                                                    
                                var xw_constructor = new JSCrossword();
                                var puzdata = xw_constructor.fromData(contents);
                                var entries = Object.values(puzdata.get_entry_mapping());

                                entries.forEach((e) => {

                                    if(myWordlist.has(e)) {    
                                        newWordSet.push([e,"",myWordlist.get(e)]);
                                        diffScoreSet.push([e,"",myWordlist.get(e)]);   // add word to diffScoreSet array
                                        diffSet.push([e,"",myWordlist.get(e)]);
                                    } else {                          
                                        newWordSet.push([e,"",""]);
                                        diffWordSet.push([e,"",""]);      // add word to diffWordSet array
                                        diffSet.push([e,"",""]);
                                        allSet.push([e,"",""]);
                                    }
                                });

                                myWordlist.forEach((score,word) => {
                                    allSet.push([word,"",score]);
                                });


                                loadDiffTable();
                            }
                        
                        })(f);
                        r.readAsBinaryString(f);
                    }
                }
            }


        }

        </script>

        <p>
        <hr/>
        Original code from
        <a
          href="https://crosswordnexus.com/apps/puz-to-nyt/"
          >Crossword Nexus</a>, licensed under MIT License.
        <br>
        
      </p>
    </div>

    <script src="js/jscrossword_combined.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


  </body>
</html>
